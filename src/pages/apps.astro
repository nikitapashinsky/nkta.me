---
import type { ImageMetadata } from 'astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import Layout from '../layouts/BaseLayout.astro';

// interface Props {
// 	imagePath: string;
// }

// const images = import.meta.glob<{ default: ImageMetadata }>(
// 	'../src/images/apps/*.{jpeg,jpg,png,gif}',
// );

// const { imagePath } = Astro.props;

// console.log(images[imagePath]);

// if (!images[imagePath])
// 	throw new Error(
// 		`"${imagePath}" does not exist in glob: "src/images/apps/*.{jpeg,jpg,png,gif}"`,
// 	);

const allApps = await getCollection('apps');

allApps.map((app) => console.log(app.data.icon.src));
---

<Layout pageTitle="Apps I use">
	<h1>Apps I use</h1>
	<div>
		{
			allApps.map(({ data }) => (
				<div>
					<img src={data.icon.src} alt={data.icon.alt} />
					<h2>{data.name}</h2>
					<p>{data.description}</p>
				</div>
			))
		}
	</div>
</Layout>
